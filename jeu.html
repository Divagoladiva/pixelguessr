<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Partie gauche (buzzer) -->
        <div class="left-container">
            <button class="buzzer-btn" id="buzzer-btn">
                <img src="buzzer.png" alt="Buzzer" class="buzzer-icon">
            </button>
        </div>

        <!-- Partie droite (mot et image) -->
        <div class="main-content">
            <button id="new-word-btn">Nouveau</button>

            <div id="word-display">
                <span id="current-word">_ _ _ _ _</span>
            </div>

            <div id="image-container">
                <img id="word-image" src="" alt="Mot image">
            </div>

            <!-- Zone de saisie pour deviner le mot -->
            <div id="guess-container" style="display: none;">
                <input type="text" id="guess-input" placeholder="Entrez votre réponse">
                <button id="check-btn">✅</button>
            </div>

            <div id="response-message" style="display: none;">
                <p id="response-text"></p>
            </div>
        </div>
    </div>

    <script src="liste.js"></script> <!-- Importer le fichier liste.js -->
<script>
    let currentWord = "";
    let displayedWord = "";
    let wordLetters = [];
    let revealedIndexes = [];

    // Sélection des éléments HTML
    const newWordButton = document.getElementById("new-word-btn");
    const wordDisplay = document.getElementById("current-word");
    const guessContainer = document.getElementById("guess-container");
    const guessInput = document.getElementById("guess-input");
    const checkBtn = document.getElementById("check-btn");
    const responseMessage = document.getElementById("response-message");
    const responseText = document.getElementById("response-text");

    // Fonction pour obtenir un mot aléatoire
    function getRandomWord() {
        return words[Math.floor(Math.random() * words.length)];
    }

    // Fonction pour masquer le mot sous des "_"
    function displayWord(word) {
        currentWord = word;
        displayedWord = "_".repeat(word.length).split("").join(" ");
        wordDisplay.textContent = displayedWord;
        wordLetters = word.split("");
        revealedIndexes = []; // Réinitialisation des lettres révélées
    }

    // Fonction pour révéler une lettre aléatoire encore cachée
    function revealLetter() {
        let hiddenIndexes = wordLetters.map((letter, index) => index)
                                       .filter(index => !revealedIndexes.includes(index));

        if (hiddenIndexes.length === 0) return; // Si toutes les lettres sont révélées, on arrête

        let randomIndex = hiddenIndexes[Math.floor(Math.random() * hiddenIndexes.length)];
        revealedIndexes.push(randomIndex);

        // Mise à jour de l'affichage
        let newDisplay = wordLetters.map((letter, index) =>
            revealedIndexes.includes(index) ? letter : "_"
        ).join(" ");

        wordDisplay.textContent = newDisplay;
    }

    // Quand on clique sur "Nouveau", on choisit un nouveau mot
    newWordButton.addEventListener("click", () => {
        let newWord = getRandomWord();
        displayWord(newWord);
        guessContainer.style.display = "none"; // Cacher la zone de texte au début
        responseMessage.style.display = "none"; // Cacher le message précédent
    });

    // Vérifier la réponse au clic sur "✅"
    checkBtn.addEventListener("click", () => {
        let userGuess = guessInput.value.trim().toLowerCase();

        if (userGuess === currentWord) {
            responseText.textContent = "Bonne réponse!";
            responseMessage.style.display = "block";
            setTimeout(() => newWordButton.click(), 2000); // Afficher un nouveau mot après 2s
        } else {
            responseText.textContent = "Mauvaise réponse!";
            responseMessage.style.display = "block";
            revealLetter(); // Révéler une lettre en cas de mauvaise réponse

            // Vérifier si toutes les lettres sont révélées
            if (revealedIndexes.length === wordLetters.length) {
                setTimeout(() => newWordButton.click(), 2000);
            }
        }
    });
</script>
</body>
</html>
